[display_template sb_status_template]
text:
  {% set frame = ((printer.system_stats.cputime * 10)|int % 2) %}
  {% if not printer['gcode_macro enable_timeout'].enabled and frame == 0 %}
    0.8, 0.8, 0.8, 0.8
  {% else %}
    {% if printer['gcode_macro PRINT_START'].fast_start %}
      0.72, 0.13, 0.6, 0.0
    {% else %}
      {% set settings = printer.configfile.settings['neopixel sb_leds'] %}
      { '%s, %s, %s, %s' % (settings.initial_red, settings.initial_green, settings.initial_blue, settings.initial_white) }
    {% endif %}
  {% endif %}

[display_template display_led_template]
text:
  {% if printer['gcode_macro PRINT_START'].fast_start %}
    0.72, 0.13, 0.6, 0.0
  {% else %}
    {% set settings = printer.configfile.settings['neopixel mini12864'] %}
    { '%s, %s, %s, %s' % (settings.initial_red, settings.initial_green, settings.initial_blue, settings.initial_white) }
  {% endif %}

[display_template display_knob_template]
text:
  {% set frame = ((printer.system_stats.cputime * 10)|int % 2) %}
  {% if not printer['gcode_macro enable_timeout'].enabled and frame == 0 %}
    0.8, 0.8, 0.8, 0.8
  {% else %}
    0.1, 0.1, 0.1, 0.1
  {% endif %}


[delayed_gcode _set_display_templates]
initial_duration: .5
gcode:
  SET_LED_TEMPLATE LED=sb_leds TEMPLATE=sb_status_template INDEX=1
  SET_LED_TEMPLATE LED=mini12864 TEMPLATE=display_led_template INDEX=1
  SET_LED_TEMPLATE LED=mini12864 TEMPLATE=display_knob_template INDEX=2
  SET_LED_TEMPLATE LED=mini12864 TEMPLATE=display_knob_template INDEX=3
