[display_template sb_leds_status]
text:
  {% set frame = ((printer.system_stats.cputime * 10)|int % 20) %}
  {% if frame < 2 %}
      0.8, 0.8, 0.8, 0.8
  {% else %}
    {% if printer['gcode_macro PRINT_START'].fast_start %}
      0.72, 0.13, 0.6, 0.0
    {% else %}
      {% set settings = printer.configfile.settings['neopixel sb_leds'] %}
      { '%s, %s, %s, %s' % (settings.initial_red, settings.initial_green, settings.initial_blue, settings.initial_white) }
    {% endif %}
  {% endif %}

[display_template display_leds_status]
text:
  {% if printer['gcode_macro PRINT_START'].fast_start %}
    0.72, 0.13, 0.6, 0.0
  {% else %}
    {% set settings = printer.configfile.settings['neopixel mini12864'] %}
    { '%s, %s, %s, %s' % (settings.initial_red, settings.initial_green, settings.initial_blue, settings.initial_white) }
  {% endif %}


[delayed_gcode set_display_templates]
initial_duration: .5
gcode:
  SET_LED_TEMPLATE LED=sb_leds TEMPLATE=sb_leds_status INDEX=1
  SET_LED_TEMPLATE LED=mini12864 TEMPLATE=display_leds_status INDEX=1
